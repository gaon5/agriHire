{% extends 'base.html' %}


{% block mytitle %}

{% endblock %}


{% block mycss %}
    <style>
        .relative {
            position: relative;
        }

        .asterisk {
            color: red;
            position: absolute;
            top: 10px; /* Center vertically */
            left: 10px; /* Distance from the left edge of the input box. Adjust as needed */
            transform: translateY(-50%); /* Centering adjustment */
            pointer-events: none; /* Ensure clicks 'pass through' to the input element */
        }

        .asterisk-inside {
            padding-left: 20px; /* Adjust as needed */
        }
    </style>
{% endblock %}

{% block body %}
    <div class="container">
        <div class="row justify-content-center my-5">
            {% for item in equipment %}
                <div class="col-lg-4">
                    <form action="{{ url_for('update_equipment', detail_id = item['equipment_id']) }}" method="POST" enctype="multipart/form-data" id="myForm1">
                        <!-- Hidden Field -->
                        <input type="hidden" name="equipment_id" id="equipment_id" value="{{ item.equipment_id }}"/>
                        <!-- Image -->
                        <div class="relative mb-3">
                            <label for="image" class="asterisk mt-2"><span style="color:red">*</span></label>
                            <input type="file" class="form-control asterisk-inside" name="image" id="image" accept="image/*">
                        </div>
                        <!-- Equipment Name -->
                        <div class="relative mb-3">
                            <label for="ename" class="asterisk mt-2"><span style="color:red">*</span></label>
                            <input type="text" class="form-control asterisk-inside" name="ename" id="ename" value="{{ item.name }}" placeholder="Enter Equipment Name">
                        </div>
                        <!-- Price -->
                        <div class="relative mb-3">
                            <label for="price" class="asterisk mt-2"><span style="color:red">*</span></label>
                            <input type="number" class="form-control asterisk-inside" name="price" id="price" value="{{ item.price }}" autocomplete="off" placeholder="Enter Price">
                        </div>
                        <!-- Stock -->
                        <div class="relative mb-3">
                            <label for="stock" class="asterisk mt-2"><span style="color:red">*</span></label>
                            <input type="number" class="form-control asterisk-inside" name="stock" id="stock" value="{{ item.count }}" autocomplete="off" placeholder="Enter Stock">
                        </div>
                        <!-- License -->
                        <div class="relative mb-3">
                            <label for="license" class="asterisk mt-2"><span style="color:red">*</span></label>
                            <select class="form-control asterisk-inside" name="license" id="license">
                                <option value="yes" {% if item['requires_drive_license'] == 1 %}selected {% endif %}>Yes</option>
                                <option value="no" {% if item['requires_drive_license'] == 0 %}selected {% endif %}>No</option>
                            </select>
                        </div>
                        <!-- Length -->
                        <div class="relative mb-3">
                            <label for="length" class="asterisk mt-2"><span style="color:red">*</span></label>
                            <input type="text" class="form-control asterisk-inside" name="length" id="length" value="{{ item.length }}" autocomplete="off" pattern="^\d+(\.\d+)?$" placeholder="Enter Length">
                        </div>
                        <!-- Width -->
                        <div class="relative mb-3">
                            <label for="width" class="asterisk mt-2"><span style="color:red">*</span></label>
                            <input type="number" class="form-control asterisk-inside" name="width" id="width" value="{{ item.width }}" autocomplete="off" placeholder="Enter Width">
                        </div>
                        <!-- Height -->
                        <div class="relative mb-3">
                            <label for="height" class="asterisk mt-2"><span style="color:red">*</span></label>
                            <input type="number" class="form-control asterisk-inside" name="height" id="height" value="{{ item.height }}" autocomplete="off" placeholder="Enter Height">
                        </div>
                        <!-- Description -->
                        <div class="relative mb-3">
                            <label for="description" class="asterisk mt-2"><span style="color:red">*</span></label>
                            <textarea id="description" class="form-control asterisk-inside" name="description" rows="5" placeholder="Enter Description">{{ item.description }}</textarea>
                        </div>
                        <!-- Detail -->
                        <div class="relative mb-3">
                            <label for="detail" class="asterisk mt-2"><span style="color:red">*</span></label>
                            <textarea id="detail" class="form-control asterisk-inside" name="detail" rows="5" placeholder="Enter Detail">{{ item.detail }}</textarea>
                        </div>
                        <!-- Submit Button -->
                        <div class="d-grid gap-2">
                            <input type="submit" class="btn btn-warning" value="Update">
                        </div>
                    </form>
                </div>
            {% endfor %}
        </div>
    </div>
{% endblock %}

{% block myjs %}
    <script>
        $("#myForm1").validate({
            rules: {
                ename: {
                    required: true
                },
                price: {
                    required: true
                },
                stock: {
                    required: true
                },
                length: {
                    required: true
                },
                width: {
                    required: true
                },
                height: {
                    required: true
                },
                description: {
                    required: true
                },
                detail: {
                    required: true
                },
            },
            errorElement: 'div',
            errorPlacement: function (error, element) {
                error.addClass('text-danger');
                error.insertAfter(element);
                element.addClass('is-invalid');
            },
            success: function (label, element) {
                $(element).removeClass('is-invalid');
            }
        });
        $('#myForm1').on('submit', function (event) {
            event.preventDefault();
            if ($(this).valid()) {
                document.getElementById("myForm1").submit();
            }
        });
    </script>
{% endblock %}